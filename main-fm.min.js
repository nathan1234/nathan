(function(e){function t(t,n){var r=e.extend({},{onePage:true,pageBackground:[],backgroundOverlay:"",homePage:"",animationSpeed:1e3,galleryImageResize:"fill",galleryAutoplay:true,gallerySlideshowDelay:1.5,slideshowSpeed:5e3},n);var i=this;i.pageHolderHeight_desktop=i.pgHigDesk="100%";i.pageHolderHeight_ipad=i.pgHigIpad="100%";i.winWidth=e(window).width();i.winHeight=e(window).height();i.IE_old=e.browser.msie;i.mobile=e(window).width()<=959;i.midMobile=e(window).width()<=767&&e(window).width()>479;i.minMobile=e(window).width()<=480;i.mobileDevice=screen.width<1024&&screen.height<1024;ipad=(e(window).width()==768||e(window).height()==768)&&(e(window).width()==1024||e(window).height()==1024);i.ipadPort=i.winWidth>=768&&i.winWidth<1024;i.navTop=e(window).width()<=959;i.aniSpeed=r.animationSpeed;i.flxDelay=r.slideshowSpeed;i.onePage=r.onePage;i.bdy=e("body");i.pHol=e(".pageHolder");i.conWarp=e(".contentWarp");i.lCon=e(".logo");i.tCon=e(".header");i.bCon=e(".footer .container");i.foot=e(".footer");i.pHpg=e(".pageHolder .page");i.pgs=e(".page");i.navUl=e(".header .headerContent .nav ul");i.mNav=e("#mobile_nav");i.backPage=e("#backArea");i.bdy.data("width",Number(e(window).width()));i.bdy.data("height",Number(e(window).height()));i.mCon=e(".mainContainer");i.backgroundOverlay=r.backgroundOverlay;i.pageBackground=r.pageBackground;galleryImageResize=r.galleryImageResize;i.preNav=0;i.curNav=0;i.pageLoaded=false;i.homePage=r.homePage;i.txtAniTim=[];i.pageLoadfinished=false;i.projFm=false;i.apis=[];i.ff=-1;i.singleBg=true;e("#bodyMain").css({width:"100%"});i.backPage.css({"overflow-x":"hidden"});e("#bodyContent").css({opacity:1});i.pHol.css({right:"0px"});if(i.IE_old||i.mobileDevice)i.bdy.find(".circle_border").css({visibility:"hidden"});if(parseInt(e.browser.version,10)==7&&e.browser.msie)e("body").css({"overflow-y":"hidden"});i.bdy.prepend('<div id="pgBackground" style="width:100%; height:50%; z-index:-10; position:absolute; right:0 "></div>');i.pgB=e("#pgBackground");i.pgB.addClass("menu_color");i.menuColor=i.pgB.css("color");i.pgB.toggleClass("menu_highlight_color","menu_color");i.menuHighlightColor=i.pgB.css("color");i.pgB.removeAttr("class");i.headerFad=e(".pageFade");i.contClose=e(".closeBtn");var s='<div id="scrollbar_holder"> <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div> <div class="viewport"> <div class="overview" ></div> </div> </div>';i.bdy.find(".add_scroll").each(function(){var t=e(this).children();e(this).wrapInner(s);e(this).find(".overview").append(t)});var o=setInterval(function(){clearInterval(o);i.initialize()},10);i.fsPly=true;i.fsArr=[];i.fsCur=-1;i.fsInt;i.fsDly;i.fsNum=0;i.fmImgLoaded=true;i.fsImgInt;i.txtAniInt;i.txtEndAni=true;i.txtAniSpd=600;i.txtAniDly=200;i.fsAutoPlay=r.galleryAutoplay=="true"?true:false;i.fsDelay=r.gallerySlideshowDelay;i.fsTxtSho=false;i.isFsGal=false;i.fsgalInter;i.sliderArr=[];i.fsWra=e(".fs_gallery");i.fsGal=e(".fs_thumbs");i.fsView=true;i.fsThuHig=e(".fsThumb").outerHeight(true);i.fpp=0;i.bdy.prepend('<div  class="pgOpen" style="visibility:hidden" ><div class="pgOpen_inner"></div></div>');i.pgOpe=i.bdy.children(":first-child");i.bdy.prepend('<a class="next_button"></a>');i.fsNxt=i.bdy.children(":first-child");i.bdy.prepend('<a class="previous_button"></a>');i.fsPre=i.bdy.children(":first-child");i.fsTxt=e("#fsTextWarp");i.bdy.find(".fs_thumbs").each(function(){e(this).children().each(function(){var t=e(this);t.bind("mouseover mouseup mouseleave",function(){i.fsSlideshow("stop")});t.bind("mouseout",function(){i.fsSlideshow("delay")});t.click(function(){if(i.mobile&&!i.ipadPort)i.pageClose();i.fsSlideshow("stop");i.fsImgLoad(e(this))})})});i.fsNxt.bind("mouseover mouseup mouseleave",function(){i.fsSlideshow("stop")});i.fsNxt.bind("mouseout",function(){i.fsSlideshow("delay")});i.fsNxt.click(function(){i.fsSlideshow("delay");i.fsCur=i.fsCur+1<i.fsArr.length?i.fsCur+1:0;i.fsImgLoad(i.fsArr[i.fsCur])});i.fsPre.bind("mouseover mouseup mouseleave",function(){i.fsSlideshow("stop")});i.fsPre.bind("mouseout",function(){i.fsSlideshow("delay")});i.fsPre.click(function(){i.fsSlideshow("delay");i.fsCur=i.fsCur-1>-1?i.fsCur-1:i.fsArr.length-1;i.fsImgLoad(i.fsArr[i.fsCur])});e(".fullDetails, .projDetails").css({height:"auto",overflow:"visible"});i.initPortfolioSlider();i.pgOpe.click(function(){var t=e(this);i.viewPage=true;i.pHol.css({"padding-left":0,top:"0px"});i.conWarp.stop();i.pgOpe.stop();i.conWarp.css({visibility:"visible"});if(!i.mobile){i.pgOpe.animate({width:"0px"},i.aniSpeed,"easeInOutQuart");i.conWarp.animate({height:i.pHol.height()},i.aniSpeed,"easeInOutQuart",function(){e(".pageHolder .fmSlider").each(function(){e(this).fmMainSlider("Resume")})})}else{i.conWarp.css({height:i.pHol.height()});i.pgOpe.animate({width:"0px"});e(".pageHolder .fmSlider").each(function(){e(this).fmMainSlider("Resume")})}});i.bdy.prepend('<div  class="pgScrollUp" ></div>');i.pgScrUp=i.bdy.children(":first-child");i.pgScrUp.hide();i.pgScrUp.click(function(){i.scrollObj.animate({scrollTop:"0px"},500,"easeInOutQuart")});i.scrollObj=e("body, html");i.$html=e("html");i.$window=e("body");i.sliderStop=false;e(window).scroll(function(){i.scrollPos=i.$html.scrollTop()>0?i.$html.scrollTop():i.$window.scrollTop();if(i.scrollPos>i.winHeight){if(!i.sliderStop){i.fsAutoPlay=false;i.sliderStop=true;i.pgScrUp.fadeIn();e(".fmSlider").each(function(){e(this).fmMainSlider("pause_slideshow")})}}else if(i.sliderStop){i.fsAutoPlay=true;i.sliderStop=false;i.pgScrUp.fadeOut()}})}t.prototype={initialize:function(){function f(n){var r=e("<img />");r.hide();r.bind("load",function(){e(this).remove();if(a<preLoadImgs.length-1){a=a+1;f(preLoadImgs[a])}else{t.history();t.page_setup()}}).error(function(){e(this).remove();if(a<preLoadImgs.length-1){a=a+1;f(preLoadImgs[a])}else{t.history();t.page_setup()}});e("#preloadImg").append(r);r.attr("src",n)}var t=this;t.bdy.css("display","block");t.loading=e("<div />").addClass("loading");t.bdy.prepend(t.loading);t.loading.css({left:e(window).width()/2-t.loading.width()/2,top:e(window).height()/2-15});t.loading.css("visibility","visible");t.prePg="";t.curPg="";t.bdy.prepend('<div id="dumDiv" style="position:absolute"> </div>');t.dumDiv=t.bdy.children(":first-child");t.menuList=[];t.bdy.prepend('<div id="preloadImg" style="width:150px; height:150px; visibility:hidden; position:absolute; left:0; top:0; overflow:hidden"> </div>');t.dumDiv.addClass("email_loading");t.dumDiv.removeClass("email_loading");e(".headerContent").prepend("<div />");t.higLig=e(".headerContent").children(":first-child");t.higLig.addClass("highlight");t.pgs.css("visibility","hidden");e(".isotope_option").show();t.nexButton_detailPg=e("a.next_button");t.preButton_detailPg=e("a.previous_button");t.slideNumber_detailPg=e(".sliderNumber");var n=-1;var r=-1;t.rez=false;if(parseInt(e.browser.version,10)==7&&e.browser.msie){e(".header").css({background:"",filter:"none"});t.dumDiv.addClass("mobile_menuBg_ie");e(".header").css({"background-color":t.dumDiv.css("background-color")})}try{document.createEvent("TouchEvent");if(!t.mobile)t.mCon.bind("click",function(){})}catch(i){}t.navUl.each(function(){var i=e(this);r++;if(r>0){i.children(":first-child").find("a").addClass("first");i.children(":last-child").find("a").addClass("last")}var s=i.parent().children(":first-child");var o=i.parent().children(":last-child");if(r>0)if(!t.mobile)o.css({top:i.parent().position().top+s.outerHeight()+"px","margin-left":(s.outerWidth()-o.outerWidth())/2});else o.css({top:"0px","margin-left":"0px"});if(r==0)i.children().each(function(){if(!t.mobile)e(this).find("ul").css({opacity:0,height:"0px"});mnu=e(this).children();mnu.bind("mouseover",function(){if(!t.mobile){var n=e(this).parent().find("ul");n.css({height:"auto"});n.stop();n.animate({opacity:1},500,false,"easeInOutQuart")}});mnu.bind("mouseout",function(){if(!t.mobile){var n=e(this).parent().find("ul");n.stop();n.animate({opacity:0},500,"easeInOutQuart",function(){n.css({height:"0px"})})}})});i.children().each(function(){var r=e(this);n++;t.menuList[n]=e("a",r).attr("href");r.children(":first-child").bind("click",function(){var n=e(this).attr("href").split("#");if(n[1]==t.url)t.page_position();if(e(this).parent().children().length<2&&!t.mobile)t.navUl.children().each(function(){if(e(this).children(":last-child").children().length>0)e(this).children(":last-child").css({height:"0px",opacity:0})})});r.children(":first-child").bind("mouseover mouseup mouseleave",function(){if(!e(this).data("act"))e(this).css("color",t.menuHighlightColor)});r.children(":first-child").bind("mouseout",function(){var n=e(this).attr("href").split("#");var r=t.onePage?n[1]:n[0];if(t.url!=r&&!e(this).data("act"))e(this).css("color",t.menuColor)})})});var s=t.pageBackground.length;if(t.menuList.length>t.pageBackground.length)for(var o=s;o<t.menuList.length;o++)t.pageBackground[o]={src:""};t.homePg=t.homePage==""?t.menuList[0].substr(1,t.menuList[0].length):t.homePage;t.cM=e('a[href$="'+t.menuList[0]+'"]').parent();t.pgs.addClass("pageHidden");e("#"+t.homePg).css("visibility","visible");e("#"+t.homePg).hide();t.navUl.data("view",false);t.mNav.bind("mouseover mouseup mouseleave",function(){if(!t.navUl.data("view"))e(this).css("color",t.menuHighlightColor)});t.mNav.bind("mouseout",function(){if(!t.navUl.data("view"))e(this).css("color",t.menuColor)});t.mNav.bind("click",function(){if(t.navUl.data("view")){t.navUl.css("display","none");t.navUl.data("view",false);e(this).css("color",t.menuColor)}else{t.navUl.css("display","block");t.navUl.data("view",true);e(this).css("color",t.menuHighlightColor)}});t.bdy.find("img").each(function(){e(this).data("src",e(this).attr("src"))});t.intVideoObject(t.bdy);e("body").find(".isotope_items").each(function(){e(this).find(".item").each(function(){e(this).bind("mouseover mouseup mouseleave",function(){var t=e(this).find("img");t.removeClass("isotope_img_normal");t.addClass("isotope_img_over")});e(this).bind("mouseout",function(){var t=e(this).find("img");t.removeClass("isotope_img_over");t.addClass("isotope_img_normal")})})});if(t.backgroundOverlay!=""&&!t.mobileDevice)e.vegas("overlay",{src:t.backgroundOverlay});e(".vegas-overlay").hide();if(t.mobileDevice)for(var u=0;u<t.pageBackground.length;u++)if(t.pageBackground[u].src_small!=""&&t.pageBackground[u].src_small)t.pageBackground[u].src=t.pageBackground[u].src_small;if(isTouch){e(".fmSliderNode img").removeClass("enableTransition");e(".circle_large").removeClass("enableTransition")}else{e(".fmSliderNode img").addClass("enableTransition");e(".circle_large").addClass("enableTransition")}clearInterval(t.intr);e(window).resize(function(){clearInterval(t.intr);t.intr=setInterval(function(){clearInterval(t.intr);t.windowRez()},100)});e(window).bind("orientationchange",function(){t.windowRez()});t.bdy.prepend('<div style="position:absolute; top:0; left:0; width:1px;" ></div>');t.bugRet=t.bdy.children(":first-child");t.mobileInterval;if(!ipad&&(screen.width<=959||screen.height<=959));else clearInterval(t.mobileInterval);var a=0;preLoadImgs.push(t.pageBackground[0].src);var l=setInterval(function(){if(googleFontLoad){clearInterval(l);f(preLoadImgs[a])}},300);e(".isotope_items").show()},menuUpdate:function(t){var n=this;var r=n.cM_;var i=-1;var s=e(".header .headerContent .nav ul li ul");n.navUl.removeClass();n.navUl.css("display","block");e(".header .headerContent .nav ul li ul li a").removeClass("subMenu_bg");e(".header .headerContent .nav ul li ul li a").removeClass("mobile_subMenuBg");if(e(window).width()>1149)e(".header .headerContent .nav ul li ul li a").addClass("subMenu_bg");else{n.navUl.addClass("mobile_menuBg");e(".header .headerContent .nav ul li ul li a").addClass("mobile_subMenuBg")}n.navUl.each(function(){var t=e(this);i++;if(i==0)t.children().each(function(){if(e(this).children().length>1)if(!n.mobile)e(this).children(":first-child").removeClass("arrow");else e(this).children(":first-child").addClass("arrow")});if(i>0){var r=t.parent().children(":first-child");var s=t.parent().children(":last-child");if(!n.mobile){var o=isNaN(parseInt(n.tCon.css("border-bottom")))?0:parseInt(n.tCon.css("border-bottom"))+1;s.css({top:t.parent().position().top+r.outerHeight()+o+"px","margin-left":(r.outerWidth()-s.outerWidth())/2});if(n.rez||!n.pageLoaded)s.css({opacity:0,height:"0px"})}else s.css({top:"0px","margin-left":"0px",height:"auto"})}});var o=false;var u=-1;n.navUl.each(function(){u++;if(u==0)e(this).find("li a").each(function(){e(this).data("act",false);if(n.cM_.attr("href")==e(this).attr("href")){r=e(this);r.css("color",n.menuHighlightColor);r.data("act",true)}});if(u>0)e(this).find("li a").each(function(){e(this).data("act",false);if(n.cM_.attr("href")==e(this).attr("href")){r=e(this).parent().parent().parent().children(":first-child");r.css("color",n.menuHighlightColor);r.data("act",true)}});e(this).find("a").each(function(){if(e(this).attr("href")==r.attr("href"))o=true})});if(!n.mobile||n.IE_old){n.navUl.css("display","block");n.higLig.css("display","block");if(r.position()!=null&&o){var a=isNaN(parseInt(r.css("padding-left")))?0:parseInt(r.css("padding-left"));n.higLig.animate({width:r.width(),left:r.position().left+a,top:r.position().top+r.outerHeight()-n.higLig.height()})}else n.higLig.hide()}else{n.navUl.css({opacity:1});if(n.navUl.data("view"))n.navUl.css("display","block");else n.navUl.css({display:"none"})}},intVideoObject:function(t){var n=this;t.find(".addVideo").each(function(){var t=false;e(this).find(".video_hover").each(function(){t=true;e(this).hover(function(){e(this).stop().animate({opacity:0},200)},function(){e(this).stop().animate({opacity:1},200)});var r=e(this).parent();r.data("added",true);r.click(function(){e("#bodyContent").find(".addVideo").each(function(){e(this).find(".vid").remove();if(!e(this).data("added")){var t=e(this);var r=t.attr("data-width")?t.attr("data-width"):"100%";var i=t.attr("data-height")?t.attr("data-height"):"100%";var s=t.attr("data-autoplay")=="true"&&!n.mobileDevice?true:false;t.prepend('<div class="vid" ></div>');t.children(":first-child").embedPlayer(t.attr("data-url"),r,i,s)}e(this).find("img").fadeIn();e(this).find(".video_hover").fadeIn();e(this).find(".video_hover").css({"z-index":"5"})});e(this).prepend('<div class="vid" ></div>');e(this).find(".video_hover").css({"z-index":"-1"});e(this).find("img").fadeOut(100,function(){var t=e(this).parent();t.children(":first-child").embedPlayer(t.attr("data-url"),t.width()+"px",t.height()+"px",t.width(),false)})})})})},initPortfolioSlider:function(){var t=this;e("#backArea").hide();e("body").find(".fmSlides").each(function(){var t=e(this);var n=[];var r=0;t.data("slides",e(this).find(".fmSliderNode").length);e(this).find(".fmSliderNode").each(function(){n.push(e(this));e(this).data("iii",r++);e(this).find(".flexSlideshow").addClass("flexslider");e(this).data("details",e(this).find(".fullDetails"));e(this).find(".fullDetails").remove()});t.data("sArry",n)});e("body").prepend(' <a class="alignRight next_button" ></a');t.n_Btn=e("body").children(":first-child");e("body").prepend('<a class="alignRight previous_button"></a>');t.p_Btn=e("body").children(":first-child");e("body").prepend('<div class="alignRight sliderNumber">1/10</div>');t.n_sli=e("body").children(":first-child");t.n_Btn.hide();t.p_Btn.hide();t.n_sli.hide();t.n_Btn.click(function(){t.curSlide=t.curSlide+1<t.curFmSlider.length?t.curSlide+1:0;t.showDetailPage(t.curFmSlider[t.curSlide]);if(!t.onePage)window.location.href="#?p="+t.curSlide;else window.location.href="#"+t.url+"?p="+t.curSlide});t.p_Btn.click(function(){t.curSlide=t.curSlide-1>-1?t.curSlide-1:t.curFmSlider.length-1;t.showDetailPage(t.curFmSlider[t.curSlide]);if(!t.onePage)window.location.href="#?p="+t.curSlide;else window.location.href="#"+t.url+"?p="+t.curSlide});e(".fmSliderNode .slider_nav").click(function(){t.curFmSlider=e(".pageHolder .fmSlides").data("sArry");var n=isNaN(e(this).parent().data("iii"))?e(this).parent().parent():e(this).parent();t.curSlide=n.data("iii");t.showDetailPage(n);if(!t.onePage)window.location.href="#?p="+t.curSlide;else window.location.href="#"+t.url+"?p="+t.curSlide})},removeBackCon:function(){var t=this;try{t.removeScrollbar()}catch(n){}try{t.backPage.children(":first-child").find(".slider_loading").each(function(){try{e(this).remove()}catch(t){}})}catch(n){}try{for(var r=0;r<t.sliderArr.length;r++){t.sliderArr[r].pause();t.sliderArr[r].destroy()}t.sliderArr=[]}catch(n){}try{t.backPage.children(":first-child").find(".flexSlideshow").each(function(){try{e(this).flexslider("remove")}catch(t){}});t.backPage.children(":first-child").find(".flexSlideshow").each(function(){try{e(this).flexslider.remove()}catch(t){}})}catch(n){}try{"#backArea".children(":first-child").find("img").each(function(){try{e(this).remove()}catch(t){}})}catch(n){}try{e("#backArea").children(":first-child").remove()}catch(n){}},showDetailPage:function(t){var n=this;var r=t;n.scrollObj.animate({scrollTop:"0px"},500,"easeInOutQuart");n.n_sli.text(n.curSlide+1+"/"+n.curFmSlider.length);if(!r)return;if(r.data("details").length==0){n.backPage.stop();e(".vegas-background").stop();e(".vegas-overlay").show();e(".vegas-background").css({visibility:"visible"});e(".vegas-background").show();try{for(var i=0;i<n.sliderArr.length;i++)n.sliderArr[i].pause()}catch(s){}if(!n.mobile)n.backPage.animate({height:"0px"},1e3,"easeInOutQuart",function(){n.removeBackCon()});else{n.backPage.css({height:"0px"});n.removeBackCon()}return}if(!n.mobile){n.n_Btn.fadeIn();n.p_Btn.fadeIn();n.n_sli.fadeIn()}else{n.n_Btn.show();n.p_Btn.show();n.n_sli.show()}n.backPage.show();n.backPage.css({width:"100%"});n.backPage.stop();n.backPage.children(":first-child").css("width",e("#bodyContent").width());if(n.mobile)n.backPage.css({height:"0px"});n.backPage.animate({height:"0px"},1e3,"easeInOutQuart",function(){n.removeBackCon();if(r.data("details").length>0){e("#backArea").prepend('<div style="position:releative; "></div>');r.data("details").clone().appendTo(n.backPage.children(":first-child"));n.backPage.children(":first-child").children(":last-child").find(" a.lazyload").each(function(){var t=!n.mobileDevice?e(this).attr("href"):e(this).attr("data-src-small")?e(this).attr("data-src-small"):e(this).attr("href");var r=e(this).attr("class");e(this).replaceWith('<img class="'+r+'" data-src="'+t+'"/>');e(this).removeClass("lazyload")})}n.detailNoMar=r.data("details").hasClass("noMargin");n.intVideoObject(e("#backArea"));n.detailPage();n.pageResize();n.backPage.css({height:"0px"});n.addScrollbar();n.backPage.children(":first-child").children(":last-child").find("img").each(function(){if(e(this).parent().hasClass("large_image")){var t=e(this);t.hide();t.parent().append('<div class="slider_loading"></div>');t.parent().children(":last-child").css({top:t.parent().height()/2});var n=t.attr("data-src")?t.attr("data-src"):t.attr("src");t.attr("src",n).load(function(){e(this).parent().find(".slider_loading").remove();e(this).fadeIn(1e3)}).error(function(){e(this).parent().find(".slider_loading").remove()}).each(function(){if(this.complete)e(this).trigger("load")})}else{e(this).hide();var n=e(this).attr("data-src")?e(this).attr("data-src"):e(this).attr("src");e(this).attr("src",n).load(function(){e(this).fadeIn(1e3)}).each(function(){if(this.complete)e(this).trigger("load")})}});n.sliderArr=[];e("#backArea").children(":first-child").find(".flexSlideshow").each(function(){var t=e(this);t.append('<div class="slider_loading" ></div>');t.children(":last-child").css({top:t.height()/2-15});t.flexslider({slideshow:true,slideshowSpeed:n.flxDelay,start:function(e){var r=false;t.parent().parent().find(".projImgs").each(function(){r=true});if(!r)t.find(".slider_loading").remove();n.sliderArr.push(e)}})});if(n.mobile){n.backPage.css({height:"auto","overflow-x":"hidden"});n.detailPage();e("#backArea").find(".addVideo").each(function(){if(!e(this).data("added")){var t=e(this);var r=t.attr("data-width")?t.attr("data-width"):"100%";var i=t.attr("data-height")?t.attr("data-height"):"100%";var s=t.attr("data-autoplay")=="true"&&!n.mobileDevice?true:false;if(i=="100%")t.css({height:"100%"});t.prepend('<div class="vid"></div>');t.children(":first-child").embedPlayer(t.attr("data-url"),r,i,s)}})}else n.backPage.animate({height:n.winHeight},1e3,"easeInOutQuart",function(){n.backPage.css({"overflow-x":"hidden",height:"auto"});n.detailPage();e("#backArea").find(".addVideo").each(function(){if(!e(this).data("added")){var t=e(this);var r=t.attr("data-width")?t.attr("data-width"):"100%";var i=t.attr("data-height")?t.attr("data-height"):"100%";var s=t.attr("data-autoplay")=="true"&&!n.mobileDevice?true:false;if(i=="100%")t.css({height:"100%"});t.prepend('<div class="vid"></div>');t.children(":first-child").embedPlayer(t.attr("data-url"),r,i,s)}})})})},detailPage:function(){var t=this;var n=e(".header").height();if(t.projFm){var r=e(window).width()>1360?n:50;var i=0;var s=t.mobile?0:t.detailNoMar?0:50;var o=t.mobile?20:t.detailNoMar?0:50;var u=t.mobile?"auto":"520";t.backPage.css({width:"100%",height:"auto"});var a=false;t.backPage.children(":first-child").find(".projDetails").each(function(){a=true});t.backPage.children(":first-child").css({"margin-top":0});t.backPage.css({top:0+"px"});if(e(window).width()>1149);else;t.backPage.children(":first-child").css({width:e("#bodyContent").width(),height:"auto",overflow:"visible"});e("#bodyContent").css({overflow:"visible"});var f=t.backPage.children(":first-child").find(".projImgs");var l=t.backPage.children(":first-child").find(".scroll-pane");if(a)if(e("#bodyContent").width()<1360){if(t.mobile)f.css({width:"100%",height:"280px"});else f.css({width:e("#bodyContent").width()-s*2+"px",height:u+"px"});f.css({position:"relative","float":"none","margin-top":r+"px","margin-right":s+"px","margin-bottom":"0px","margin-left":s+"px"});l.css({position:"relative",width:"auto",height:"auto","float":"none",top:50+"px","margin-top":"0px","margin-right":o+"px","margin-bottom":100+"px","margin-left":o+"px"});t.removeScrollbar()}else{f.css({height:e(window).height()-(50+r+n),width:e("#bodyContent").width()-520+"px",margin:"0px 50px 50px 50px","float":"left"});l.css({margin:"50px 75px 0px 0px",top:"0px",position:"relative",height:e(window).height()-(50+r+n)})}else{var c=t.ipadPort?e(window).height()-n:e(window).height()-(i+s+n);if(t.mobile)f.css({height:"280px",width:e("#bodyContent").width()+"px",margin:"50px 0px 0px 0px","float":"left"});else if(t.detailNoMar){t.backPage.children(":first-child").css({margin:"0px"});f.css({height:e(window).height()-n,width:"100%",top:"0px",padding:"0px",margin:"0px","float":"left"})}else f.css({height:c-s,width:e("#bodyContent").width()-s*2+"px",margin:"20px 50px 0px 50px","float":"left"})}if(t.backPage.height()<t.winHeight-n&&t.backPage.children(":first-child").length>0)t.backPage.css({height:t.winHeight-n})}else{var h=t.mobile||e(window).width()<=959?0:n;t.backPage.css({height:"0px",top:h+"px"})}},fsSlideshow:function(e){var t=this;clearInterval(t.fsInt);clearInterval(t.fsDly);if(e=="delay")t.fsDly=setInterval(function(){clearInterval(t.fsDly);t.fsSlideshow("play")},500);if(e=="play")t.fsInt=setInterval(function(){if(t.fsAutoPlay){t.fsCur=t.fsCur+1<t.fsArr.length?t.fsCur+1:0;t.fsImgLoad(t.fsArr[t.fsCur])}clearInterval(t.fsInt)},t.fsDelay*2500)},fsTextOut:function(){var t=this;clearInterval(t.txtAniInt);if(!t.mobileDevice){var n=-1;t.txtAniInt=setInterval(function(){if(t.txtEndAni){clearInterval(t.txtAniInt);if(t.fsTxt.children().length>0)if(e(t.fsTxt.data("con")).data("num")!=t.fsNum||!t.fsTxtSho)t.fsTxt.find(".fs_caption").each(function(){var r=t.fsTxt.find(".fs_caption").children().length;if(!isNaN(e(this).data("lt")))var i={left:e(this).data("lt")-70,opacity:0};else i={right:e(this).data("rt")-70,opacity:0};t.fsTxt.data("pg",e(".pageHolder .page").attr("data-id"));t.fsTxt.find(".fs_caption div").each(function(){n++;e(this).data("pos",n);e(this).delay(Number(n*170)).animate(i,250,"easeOutSine",function(){if(e(this).data("pos")==r-1){t.fsTxt.data("con").append(t.fsTxt.children());t.fsTxt.data("con").find(".fs_caption").css("visibility","hidden");t.txtEndAni=false;if(t.fsTxtSho)t.fsTextIn();else t.txtEndAni=true;if(!t.pageLoadfinished)t.bg_setup()}})})});else t.txtEndAni=true;else{if(!t.pageLoadfinished)t.bg_setup();if(t.fsTxtSho){t.txtEndAni=false;t.fsTextIn()}else t.txtEndAni=true}}},200)}},fsTextIn:function(){var t=this;var n=false;var r=0;if(t.fsArr.length>0)t.fsArr[t.fsNum].find(".fs_caption").each(function(){n=true});if(n){t.fsArr[t.fsNum].find(".fs_caption").css({visibility:"visible"});t.fsArr[t.fsNum].find(".fs_caption").hide();t.fsTxt.append(t.fsArr[t.fsNum].find(".fs_caption"));t.fsTxt.data("con",t.fsArr[t.fsNum]);t.fsTxt.find(".fs_caption").each(function(){if(!e(this).data("lt")){e(this).data({lt:parseInt(e(this).css("left"))});e(this).data({rt:parseInt(e(this).css("right"))})}e(this).show();if(!isNaN(e(this).data("lt"))){var n={left:e(this).data("lt")+150,opacity:0};var i={left:e(this).data("lt"),opacity:1}}else{n={right:e(this).data("rt")+150,opacity:0};i={right:e(this).data("rt"),opacity:1}}var s=t.fsTxt.find(".fs_caption").children().length;t.fsTxt.find(".fs_caption div").each(function(){r++;e(this).data("pos",r);e(this).css(n);e(this).delay(Number(r*t.txtAniDly)).animate(i,t.txtAniSpd,"easeOutSine",function(){if(e(this).data("pos")==s)t.txtEndAni=true})})})}else t.txtEndAni=true},fsImgLoadTest:function(){var t=this;clearInterval(t.fsImgInt);t.fsImgInt=setInterval(function(){if(t.fmImgLoaded){clearInterval(t.fsImgInt);if(t.fsNum==t.fsCur){t.fsSlideshow("play");t.loading.fadeOut(300,function(){e(this).css("visibility","hidden")})}else t.fsImgLoad(t.fsArr[t.fsCur])}},500)},fsImgLoad:function(t){var n=this;n.scrollObj.animate({scrollTop:"0px"},500,"easeInOutQuart");if(n.fsArr.length<1||n.fsCur<0)return 0;for(var r=0;r<n.fsArr.length;r++)if(r!=t.data("num")&&n.fsArr[r].css("opacity")<.99)n.fsArr[r].css({opacity:"1"});n.fsArr[t.data("num")].css({opacity:".25"});n.fsCur=t.data("num");n.n_sli.text(n.fsCur+1+"/"+n.fsArr.length);n.fsImgLoadTest();if(n.mobileDevice)n.pageClose();if(n.fmImgLoaded){n.fmImgLoaded=false;var i=!n.mobile?t.attr("data-src"):t.attr("data-src-small")?t.attr("data-src-small"):t.attr("data-src");n.fsNum=t.data("num");rezType=t.attr("data-imgResize");n.bdy.prepend('<div class="fsLoading"></div>');n.fflod=n.bdy.find(".fsLoading");if(n.mobile)n.fflod.css({bottom:"60px"});n.fflod.hide();setTimeout(function(){try{n.fflod.fadeIn(500)}catch(e){}},1e3);if(i!=""){var s=e("<img />");s.hide();s.bind("load",function(){e(this).remove();e.vegas({src:i,fade:500,complete:function(){n.fmImgLoaded=true;try{n.fflod.remove()}catch(e){}n.fsTextOut()}})}).error(function(){e(this).remove();n.fmImgLoaded=true;try{n.fflod.remove()}catch(t){}n.fsTextOut()});e(".loading").fadeIn();e("#preloadImg").append(s);s.attr("src",i)}else{n.fmImgLoaded=true;try{n.fflod.remove()}catch(o){}n.fsTextOut();e(".vegas-background").fadeOut()}}},pageClose:function(){var t=this;var n=t.pgScrUp;e(".pageHolder .fmSlider").each(function(){e(this).fmMainSlider("Pause")});t.viewPage=false;n.children(":first-child").children(":first-child").css({right:"0px"});t.conWarp.stop();t.pgOpe.stop();var r=e(window).height();if(!t.mobile)t.conWarp.animate({height:"0px"},t.aniSpeed,"easeInOutQuart",function(){t.pgOpe.animate({width:"30px"},t.aniSpeed,"easeInOutQuart");t.conWarp.css({visibility:"hidden"});e(".vegas-background").attr("src",e(".vegas-background").attr("src"))});else{t.pgOpe.css({width:"30px"});t.conWarp.css({height:"0px",visibility:"hidden"});e(".vegas-background").attr("src",e(".vegas-background").attr("src"))}},bg_setup:function(){var t=this;var n="";rezType="fill";e(".pageHolder .page").find("#mapWrapper").each(function(){if(!t.IE_old)e(this).children(":first-child").remove()});e("#bodyContent").find(".addVideo").each(function(){e(this).find(".vid").remove();e(this).find("img").show()});n=String(t.pageBackground[0].src);if(n!="")if(t.singleBg&&imgBgSrc==n)t.bg_load();else{var r=e("<img />");r.hide();r.bind("load",function(){e(this).remove();e.vegas({src:n,fade:500,complete:function(){t.bg_load()}})}).error(function(){e(this).remove();t.bg_load()});e(".loading").fadeIn();e("#preloadImg").append(r);r.attr("src",n)}else{t.bg_load();e(".vegas-background").fadeOut()}},bg_load:function(){var t=this;if(!t.pageLoaded){t.pageLoaded=true;t.menuUpdate();e("#bodyMain").css({"overflow-y":"visible"});t.tCon.addClass("header_shadow");t.headerFad.delay(100).fadeOut(1e3,"easeInOutQuart",function(){t.headerFad.remove()});e(".footer").css({display:"table"});if(!t.IE_old)e(".isotope_items .item a .img_text").css("visibility","visible");e("body").data("bgType",isMobileChk);e("body").find(".parallax").each(function(){var t=!isMobileChk?e(this).attr("data-src"):e(this).attr("data-src-small")?e(this).attr("data-src-small"):e(this).attr("data-src");var n=!isTouch?"fixed":"scroll";if(t!=undefined)e(this).css({"background-image":"url("+t+")","background-attachment":n})});e(".staticContent").find("#mapWrapper").each(function(){if(!t.IE_old){e(this).parent().prepend(e(this).data("map"));e(this).parent().children(":first-child").addClass("mapStyle");e(this).remove()}})}t.loading.fadeOut(300,function(){e(this).css("visibility","hidden")});e(".vegas-overlay").fadeIn(1e3);t.page_display();var n=undefined;e("body").find(".staticContent").each(function(){if(e(this).attr("data-id")==t.url)n=e(this)});if(n!=undefined)t.page_position()},page_setup:function(){var t=this;e("#bodyMain").css({width:"100%"});t.winWidth=e(window).width();t.winHeight=e(window).height();t.ipadPort=t.winWidth>=768&&t.winWidth<1024;t.mobile=t.winWidth<=959&&!t.ipadPort;t.midMobile=t.winWidth<=767&&t.winWidth>479;t.minMobile=t.winWidth<=480;isMobileChk=t.winWidth<768;t.navTop=true;t.pgHeight="100%";t.pgHeight="100%";t.pgOpe.css({top:(t.winHeight-t.pgOpe.height())/2});e("#bodyContent").css({width:"100%"});t.bdy.find("img").each(function(){if(!t.mobile||t.IE_old||!e(this).attr("data-src-small")){if(e(this).data("src"))if(e(this).data("src")!=e(this).attr("src"))e(this).attr("src",e(this).data("src"))}else if(e(this).attr("data-src-small"))if(String(e(this).attr("src"))!=String(e(this).attr("data-src-small")))e(this).attr("src",e(this).attr("data-src-small"))});t.menuUpdate();if(e(window).width()<=959);else;t.pageResize();if(t.mobile)t.removeScrollbar();else t.addScrollbar();e("#bodyContent").find(".addVideo").each(function(){if(e(this).data("added"))e(this).find(".vid").remove();e(this).find("img").show();e(this).find(".video_hover").show();e(this).find(".video_hover").css({"z-index":"5"})});e("body").find(".isotope_items").each(function(){if(!t.IE_old){var n=e(".isotope_items .item");if(t.midMobile){n.removeClass("large");n.removeClass("small");n.addClass("medium")}else if(t.minMobile){n.removeClass("medium");n.removeClass("large");n.addClass("small")}else{n.removeClass("medium");n.removeClass("small");n.addClass("large")}}e(this).isotope({},"reLayout")});t.fsTxtSho=!t.mobile&&!t.mobileDevice;e(".pageHolder .page").find(".fs_gallery").each(function(){if(t.mobile||t.mobileDevice||t.fsTxt.data("pg")!=e(".pageHolder .page").attr("data-id")){if(t.fsTxt.children().length>0)t.fsTextOut()}else if(t.fsTxt.children().length<1)t.fsTextIn();e(".fsThumb").addClass("fsThumbAnimation");e(".fs_thumbs").addClass("fsThumbAnimation");t.fpp=0;if(!t.mobile)setTimeout(function(){if(t.fsCur<0&&t.isFsGal&&parseInt(t.pHol.css("left"))==0){t.fsCur=0;t.fsImgLoad(t.fsArr[0])}},500);else if(t.fsCur<0&&parseInt(t.pHol.css("left"))==0){t.fsCur=0;t.fsImgLoad(t.fsArr[0])}});if(t.rez)e.vegas("resize_");if(!t.mobile)t.navUl.find("ul").css({"z-index":"inherit"});else t.navUl.find("ul").css({"z-index":1e3});if(t.mobile)if(t.isFsGal){t.nexButton_detailPg.removeClass("next_mobile_top_pos next_pos").addClass("next_mobile_bottom_pos");t.preButton_detailPg.removeClass("previous_mobile_top_pos previous_pos").addClass("previous_mobile_bottom_pos");t.slideNumber_detailPg.removeClass("sliderNumber_mobile_top_pos sliderNumber_pos").addClass("sliderNumber_mobile_bottom_pos")}else{t.nexButton_detailPg.removeClass("next_mobile_bottom_pos next_pos").addClass("next_mobile_top_pos");t.preButton_detailPg.removeClass("previous_mobile_bottom_pos previous_pos").addClass("previous_mobile_top_pos");t.slideNumber_detailPg.removeClass("sliderNumber_mobile_bottom_pos sliderNumber_pos").addClass("sliderNumber_mobile_top_pos")}else{t.nexButton_detailPg.removeClass("next_mobile_bottom_pos next_mobile_top_pos").addClass("next_pos");t.preButton_detailPg.removeClass("previous_mobile_bottom_pos previous_mobile_top_pos").addClass("previous_pos");t.slideNumber_detailPg.removeClass("sliderNumber_mobile_bottom_pos sliderNumber_mobile_top_pos").addClass("sliderNumber_pos")}e(".fmSliderNode img").removeClass("enableTransition");e(".pageHolder .page").find("img.scale_fill, img.scale_fit").each(function(){e(this).css({left:-(e(this).width()-e(this).parent().width())/2});e(this).css({top:-(e(this).height()-e(this).parent().height())/2})});if(!isTouch)e(".fmSliderNode img").addClass("enableTransition");if(t.rez){e(".pageHolder .fmSlider").each(function(){e(this).fmMainSlider("posNav")});if(!isMobileChk)t.mCon.css({height:"auto"})}if(t.rez){e(t.contClose.attr("data-content")).css({top:"0px"});t.contClose.children(":first-child").children(":first-child").css({right:"-40px"})}if(t.rez&&e("body").data("bgType")!=isMobileChk&&e("body").data("bgType")!=undefined){e("body").data("bgType",isMobileChk);e("body").find(".parallax").each(function(){var t=!isMobileChk?e(this).attr("data-src"):e(this).attr("data-src-small")?e(this).attr("data-src-small"):e(this).attr("data-src");var n=!isTouch?"fixed":"scroll";if(t!=undefined)e(this).css({"background-image":"url("+t+")","background-attachment":n})})}setTimeout(function(){t.mrgTop=t.isFsGal?t.winHeight:0;t.mrgTop=0;if(!isMobileChk){var e=isNaN(parseInt(t.tCon.css("border-bottom")))?0:parseInt(t.tCon.css("border-bottom"));t.mrgTop=t.tCon.outerHeight()-e}t.mCon.css({"margin-top":t.mrgTop});t.pageResize();t.pageBgRepos()},100)},pageResize:function(t){var n=this;n.winWidth=e(window).width();n.heaWid=0;n.heaPos=0;n.fsTxt.css({width:n.winWidth});if(n.rez)if(n.isFsGal)n.fsTxt.css({height:n.winHeight-n.tCon.outerHeight()});else n.fsTxt.css({height:0});n.pHol.css({"padding-left":0,top:0});n.conWarp.css({width:n.winWidth});if(n.viewPage&&n.pgViewed)n.conWarp.css({height:"auto"});n.pHol.css("left",(n.conWarp.width()-n.pHol.width())/2);n.pgB.css({width:n.winWidth-(n.heaWid+n.heaPos)});n.detailPage();e.vegas("resize_")},pageBgRepos:function(e){var t=this;if(t.viewPage&&t.pgViewed){t.conWarp.stop();if(!t.mobile)t.conWarp.animate({height:t.pHol.height()},t.aniSpeed,"easeInOutQuart",function(){});else t.conWarp.css({height:"auto"})}},page_position:function(t){var n=this;n.kko=n.kko==undefined?1:n.kko+1;if(n.rez)n.page_setup();n.openYes=true;var r=undefined;e("body").find(".staticContent").each(function(){if(e(this).attr("data-id")==n.url)r=e(this)});n.scrollObj.stop();var i=0;if(n.firstScrol==undefined){n.firstScrol=true;setTimeout(function(){i=r!=undefined?parseInt(r.position().top)+1-n.mrgTop:0;n.scrollObj.animate({scrollTop:i},n.aniSpeed,"easeInOutQuart")},1e3)}else{i=r!=undefined?parseInt(r.position().top)+1-n.mrgTop:0;n.scrollObj.animate({scrollTop:i},n.aniSpeed,"easeInOutQuart")}e(".headerContent li a").css({color:n.menuColor});if(n.mobile){n.navUl.data("view",false);n.navUl.css({display:"none"});n.mNav.css("color",n.menuColor)}n.menuUpdate()},page_load:function(t){var n=this;n.url=t?t:n.homePg;n.cM=e('a[href$="#'+n.url+'"]').parent();n.cM_=!n.onePage?e('a[href="'+n.url+'"]'):e('a[href$="#'+n.url+'"]');n.pgViewed=false;clearInterval(n.fsgalInter);var r=undefined;e("body").find(".staticContent").each(function(){if(e(this).attr("data-id")==n.url)r=e(this)});if(r!=undefined){if(n.curPg==""){n.curPg=n.prePg=n.url;if(n.pgSub==undefined&&n.onePage)window.location.href="#"+n.url;n.cM=e('a[href$="#'+n.curPg+'"]').parent();n.pgs.css("visibility","hidden");n.pHpg.removeClass("pageShow");n.pHpg.addClass("pageHidden");n.bg_setup()}else n.page_position();return}n.firstScrol=true;if(n.prePg==n.curPg){try{n.fflod.remove()}catch(t){}if(n.loading.css("visibility")=="hidden")n.loading.css({left:n.winWidth/2-n.loading.height()/2,top:n.tCon.height()+50});n.loading.css("visibility","visible");n.pHol.stop();for(var i=0;i<n.txtAniTim.length;i++){clearInterval(n.txtAniTim[i]);n.ff=-1}if(n.curPg==""){n.curPg=n.prePg=n.url;if(n.pgSub==undefined&&n.onePage)window.location.href="#"+n.url;n.cM=e('a[href$="#'+n.curPg+'"]').parent();n.pgs.css("visibility","hidden");n.pHpg.removeClass("pageShow");n.pHpg.addClass("pageHidden");n.bdy.append(n.pHpg);n.scrollObj.animate({scrollTop:"0px"},0,"easeInOutQuart");n.bg_setup()}else{n.curPg=n.url;n.pHol.stop();n.fsNxt.fadeOut();n.fsPre.fadeOut();n.fsSlideshow("stop");clearInterval(n.fsImgInt);clearInterval(n.fsInt);clearInterval(n.fsDly);n.fsTxtSho=false;n.curSlide=undefined;n.n_Btn.fadeOut();n.p_Btn.fadeOut();n.n_sli.fadeOut();if(n.fsTxt.children().length>0)if(!n.mobileDevice)n.fsTextOut();n.isFsGal=false;e(".pageHolder .page").find(".fs_gallery").each(function(){n.isFsGal=true});if(n.backPage.width()!=0)n.backPage.animate({height:"0px"},n.aniSpeed,"easeInOutQuart",function(){n.removeBackCon();if(e(".vegas-overlay").css("display")=="none"&&n.pageLoaded)e(".vegas-overlay").fadeIn(50)});n.scrollObj.stop();var s=window.pageYOffset!=0?n.aniSpeed:50;var o=n.conWarp.height()>50?n.aniSpeed:0;if(n.prePg!=n.url){n.fsTxt.animate({height:0},n.aniSpeed,"easeInOutQuart");e(".dynamicLoad").find("a.next_btn, a.previous_btn").each(function(){if(e(this).css("visibility"))e(this).fadeOut("1000",function(){e(this).css({visibility:"hidden"})})});n.scrollObj.stop();n.scrollObj.animate({scrollTop:"0px"},s,"easeInOutQuart",function(){if(e(this).prop("tagName")=="BODY")return;if(!n.mobile)n.conWarp.animate({height:"0px"},o,"easeInOutQuart",function(){n.pageLoadfinished=false;n.removeBackCon();n.conWarp.css({visibility:"hidden"});e(".vegas-background").attr("src",e(".vegas-background").attr("src"));n.bg_setup()});else{n.conWarp.stop();n.conWarp.css({height:"0px"});n.pageLoadfinished=false;n.removeBackCon();e(".vegas-background").attr("src",e(".vegas-background").attr("src"));n.bg_setup()}})}else{if(r!=undefined||n.openYes){e(".pageHolder .page").find(".fs_gallery").each(function(){n.isFsGal=true;n.fsView=true;n.fsNxt.show().fadeIn();n.fsPre.show().fadeIn();n.n_sli.show().fadeIn();n.fsTxtSho=true;n.fsThuHig=ppg.find(".fsThumb").outerHeight(true)});n.page_position()}n.scrollObj.animate({scrollTop:0},500,"easeInOutQuart")}}}e(".headerContent li a").css({color:n.menuColor});if(n.mobile){n.navUl.data("view",false);n.navUl.css({display:"none"});n.mNav.css("color",n.menuColor)}n.menuUpdate()},page_display:function(){var t=this;e(".page").hide();var n=!t.onePage?e("body .page"):e('body .page[data-id="'+t.curPg+'"]');n.css("visibility","visible");n.show();t.pHol.stop();e("body").find(".addVideo").each(function(){e(this).find(".vid").remove();e(this).find("img").show()});e(".fmSlider").each(function(){e(this).fmMainSlider("Stop")});if(t.curPg!=""){e("body").append(e(".pageHolder .page"));e(".pageHolder").append(n);e(".pageHolder .page").removeClass("pageHidden");e(".pageHolder .page").addClass("pageShow");t.pageHolderHeight_desktop="100%";t.pageHolderHeight_ipad="100%";if(!t.IE_old)e("body").find(".isotope_items").each(function(){var n=e(".isotope_items .item");if(t.midMobile){n.removeClass("large");n.removeClass("small");n.addClass("medium")}else if(t.minMobile){n.removeClass("medium");n.removeClass("large");n.addClass("small")}else{n.removeClass("medium");n.removeClass("small");n.addClass("large")}});t.isFsGal=false;e(".pageHolder .page").find(".fs_gallery").each(function(){t.isFsGal=true});if(!t.isFsGal)t.fsTxt.animate({height:0},t.aniSpeed,"easeInOutQuart");t.projFm=false;e(".pageHolder .page").find(".fmSlides .fmSliderNode").each(function(){t.projFm=true});try{e(".pageHolder .page").find(".flexslider").each(function(){if(e(this).data("slid").currentSlide!=0)e(this).data("slid").flexAnimate(0);e(this).data("slid").resume()})}catch(r){}e.vegas("resize_");t.page_setup();var i=e(".pageHolder .page");i.find("#mapWrapper").each(function(){if(!t.IE_old)e(this).children(":first-child").remove()});i.find(".graph_container li").each(function(){e(this).each(function(){e(this).children(":first-child").css("width","0px")})});i.find("ul.feature_wrap li .fea").css({height:"0%",opacity:"0"});t.fsCur=-1;t.fsView=false;t.fsArr=[];i.find(".fs_gallery").each(function(){t.fsTxtSho=true;t.fsThuHig=i.find(".fsThumb").outerHeight(true);e(this).find(".fs_thumbs").each(function(){e(this).children().each(function(){t.fsArr.push(e(this));if(e(this).css("opacity")<.99)e(this).css({opacity:"1"});e(this).data("num",t.fsArr.length-1);t.fsArr[0].css("opacity",.25)})})});i.find(".animate").each(function(){e(this).css("width","1px")});i.find(".animate2").each(function(){e(this).css("opacity","0")});t.viewPage=true;t.pgOpe.animate({width:"0px"},t.aniSpeed,"easeInOutQuart");t.conWarp.css({visibility:"visible",height:0});t.pHig=t.pHol.height();t.fmsliderYes=false;var s=t.aniSpeed;e(".pageHolder .fmSlider").each(function(){t.pHig=t.winHeight-t.mrgTop+1;t.fmsliderYes=true});if(t.openYes==undefined){if(t.isFsGal)t.fsTxt.css({height:t.winHeight-t.tCon.outerHeight()});t.openYes=true;if(t.fmsliderYes){t.conWarp.css({height:t.pHig});s=0}}if(!t.mobile)t.conWarp.animate({height:t.pHig},s,"easeInOutQuart",function(){t.pageLoadfinished=true;t.conWarp.find(".scroll-pane").css("overflow-y","auto");t.addScrollbar();if(!t.fmsliderYes)t.conWarp.css({height:"auto"});t.pgViewed=true;t.arrangePgContent();if(t.isFsGal)t.fsTxt.animate({height:t.winHeight-t.tCon.outerHeight()},t.aniSpeed,"easeInOutQuart")});else{t.pageLoadfinished=true;t.conWarp.find(".scroll-pane").css("overflow-y","auto");t.addScrollbar();t.conWarp.stop();t.conWarp.css({height:"auto"});t.pgViewed=true;t.arrangePgContent();if(t.isFsGal)t.fsTxt.css({height:t.winHeight-t.tCon.outerHeight()})}}else t.prePg=t.curPg},resetPage:function(){var t=this;t.pHol.stop();t.fsNxt.fadeOut();t.fsPre.fadeOut();t.fsSlideshow("stop");clearInterval(t.fsImgInt);clearInterval(t.fsInt);clearInterval(t.fsDly);t.fsTxtSho=false;t.curSlide=undefined;t.n_Btn.fadeOut();t.p_Btn.fadeOut();t.n_sli.fadeOut();if(t.backPage.height()!=0)t.backPage.animate({height:"0px"},t.aniSpeed,"easeInOutQuart",function(){t.removeBackCon();if(e(".vegas-overlay").css("display")=="none"&&t.pageLoaded)e(".vegas-overlay").fadeIn(50)});e(".vegas-background").stop();if(!t.mobile){e(".vegas-background").css({visibility:"visible"});e(".vegas-background").fadeIn(500,function(){})}else{e(".vegas-background").css({visibility:"visible"});e(".vegas-overlay").show();e(".vegas-overlay").fadeIn(50)}var n=t.pgOpe;t.viewPage=true;t.conWarp.stop();t.pgOpe.stop();t.conWarp.css({visibility:"visible"});e(".pageHolder .fmSlider").each(function(){e(this).fmMainSlider("Resume")});if(t.mobile){t.navUl.data("view",false);t.navUl.css({display:"none"});t.mNav.css("color",t.menuColor)}t.menuUpdate()},arrangePgContent:function(){var t=this;t.prePg=t.curPg;if(t.curPg!=t.url)t.page_load(t.url);ppg=e(".pageHolder .page");ppg.find("#mapWrapper").each(function(){if(!t.IE_old)e(this).append(e(this).data("map"))});e("body").find(".isotope_items").each(function(){if(!e(this).data("loaded"))e(this).isotope({itemSelector:".item",animationOptions:{complete:function(){if(!t.onePage)t.pageResize()}}});e(this).isotope({_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}}});e(this).data("loaded",true)});ppg.find(".fs_gallery").each(function(){t.fsView=true;t.fsNxt.fadeIn();t.fsPre.fadeIn();if(!t.mobile){if(t.fsCur<0&&t.isFsGal){t.fsCur=0;t.fsImgLoad(t.fsArr[0])}t.n_sli.fadeIn()}else{if(t.fsCur<0){t.fsCur=0;t.fsImgLoad(t.fsArr[0])}t.n_sli.show()}t.n_sli.text(1+"/"+t.fsArr.length)});e("#bodyContent").find(".addVideo").each(function(){if(!e(this).data("added")){var n=e(this);var r=n.attr("data-width")?n.attr("data-width"):"100%";var i=n.attr("data-height")?n.attr("data-height"):"100%";var s=n.attr("data-autoplay")=="true"&&!t.mobileDevice;n.prepend('<div class="vid"></div>');n.children(":first-child").embedPlayer(n.attr("data-url"),r,i,s)}});var n=0;if(t.IE_old)ppg.find("ul.feature_wrap li").show();ppg.find("ul.feature_wrap li .fea").each(function(){n++;e(this).parent().show();e(this).delay(Number(n*150)).animate({height:"100%",opacity:"1"},1200,"easeInOutQuart")});e(".pageHolder .fmSlider").each(function(){e(this).fmMainSlider("ReStart")});if(t.pgSub!=undefined&&t.projFm){t.curFmSlider=e(".pageHolder .fmSlides").data("sArry");var r=t.pgSub.split("=");t.curSlide=Number(r[1]);t.showDetailPage(t.curFmSlider[Number(r[1])])}for(var i=0;i<t.txtAniTim.length;i++){clearInterval(t.txtAniTim[i]);t.ff=-1}ppg.find(".animate").each(function(){var n=e(this);t.ff=t.ff+1;n.data("i",t.ff);t.txtAniTim[t.ff]=setInterval(function(){clearInterval(t.txtAniTim[Number(n.data("i"))]);n.animate({width:"100%"},1e3,"easeOutQuart")},Number(e(this).attr("data-time"))*200)});ppg.find(".animate2").each(function(){var n=e(this);t.ff=t.ff+1;n.data("i",t.ff);t.txtAniTim[t.ff]=setInterval(function(){clearInterval(t.txtAniTim[Number(n.data("i"))]);n.animate({opacity:"1"},1e3,"easeOutQuart")},Number(e(this).attr("data-time"))*200)});ppg.find(".graph_container").each(function(){t.graph_display(e(this))})},history:function(){var e=this;(function(t){function r(r){var i=r.split("?");var s=!e.onePage?e.homePg:i[0];e.pgSub=i[1];if(s!=""){if(n==""&&e.curPg=="")n=t(e.homePage);if(e.hisPath!=s){e.hisPath=s;e.page_load(s)}else if(e.pgSub!=undefined&&e.projFm){var o=e.pgSub.split("=");if(Number(o[1])!=e.curSlide){e.curFmSlider=t(".pageHolder .fmSlides").data("sArry");e.curSlide=Number(o[1]);e.showDetailPage(e.curFmSlider[Number(o[1])])}}else e.resetPage()}else if(n!=""&&e.curPg==""){if(e.hisPath!=s){e.hisPath=s;e.page_load(e.homePg)}}else if(!e.onePage)if(e.pgSub!=undefined&&e.projFm){var o=e.pgSub.split("=");if(Number(o[1])!=e.curSlide){e.curFmSlider=t(".pageHolder .fmSlides").data("sArry");e.curSlide=Number(o[1]);e.showDetailPage(e.curFmSlider[Number(o[1])])}}else e.resetPage();if(s==""&&e.curPg=="")e.page_load(e.homePg)}var n="";t(document).ready(function(){t.history.init(r);t("#navigation a").not(".external-link").click(function(){var e=t(this).attr("href");e=e.replace(/^.*#/,"");t.history.load(e);return false})})})(jQuery)},addScrollbar:function(){var t=this;e("#bodyContent .scroll-pane").each(function(){t.apis.push(e(this).jScrollPane({autoReinitialise:true,verticalDragMinHeight:70}).data().jsp)})},removeScrollbar:function(){var t=this;if(t.apis.length){e.each(t.apis,function(e){this.destroy()});t.apis=[]}},graph_display:function(t){t.find("li").each(function(){e(this).each(function(){e(this).children(":first-child").css("width","0px");e(this).children(":first-child").stop();e(this).children(":first-child").animate({width:e(this).attr("data-level")},1500,"easeInOutQuart")})})},windowRez:function(){var t=this;if(Number(t.bdy.data("width"))!=Number(e(window).width())||Number(t.bdy.data("height"))!=Number(e(window).height())){t.bdy.data("width",Number(e(window).width()));t.bdy.data("height",Number(e(window).height()));t.rez=true;t.page_setup();t.pageResize();if(t.mobile)t.detailPage();t.rez=false}}};e.fn.mainFm=function(n){var r=e(this);var i=r.data("GBInstance");if(!i){if(typeof n==="object"||!n)return r.data("GBInstance",new t(r,n))}else if(i[n])return i[n].apply(i,Array.prototype.slice.call(arguments,1))}})(jQuery)
